from django.test import TestCase

from rest_framework.views import APIView
from rest_framework.response import Response
from rest_framework import status
from malware_app.models import Malwarelist
from .serializers import MalwareSerializer
from django.db import models

class MyTestCases(TestCase):
    def test_index_loads_properly(self):
        # Empty API page loads properly
        response = self.client.get('http://127.0.0.1:8000/urlinfo/1/')
        self.assertEqual(response.status_code, 200)

    def test_malware_found(self):
        # Test passes if found a malware URL in the malware-list DB table.
        test = Malwarelist.objects.filter(url="www.evilmalware.com").exists()

        self.assertEqual(test, True)

    def test_malware_not_found(self):
        # Test passes if not found a malware URL in the malware-list DB table.
        test = Malwarelist.objects.filter(url="www.espn.com").exists()

        self.assertEqual(test, False)


